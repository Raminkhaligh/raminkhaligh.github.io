<!doctype html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="Content-Language" content="en-US" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Blog & Case Studies | Ramin Khaligh - ÿ±ÿßŸÖ€åŸÜ ÿÆŸÑ€åŸÇ</title>

  <!-- SEO (aligned with home) -->
  <meta name="description" content="Articles, case studies, and insights from Ramin Khaligh | ÿ±ÿßŸÖ€åŸÜ ÿÆŸÑ€åŸÇ ‚Äî on product management, UX, and growth." />
  <meta name="keywords" content="Product Management, UX, Growth, Product Strategy, Leadership, Ramin Khaligh, Case Studies" />
  <meta name="author" content="Ramin Khaligh" />
  <meta name="robots" content="index,follow" />
  <meta name="copyright" content="¬© 2025 Ramin Khaligh" />
  <meta http-equiv="x-dns-prefetch-control" content="on" />
  <meta name="color-scheme" content="light dark" />

  <!-- Canonical & Language (consistent with home) -->
  <link rel="canonical" href="https://raminkhaligh.github.io/blog/" />
  <link rel="alternate" hreflang="en" href="https://raminkhaligh.github.io/blog/" />
  <link rel="alternate" hreflang="fa" href="https://raminkhaligh.github.io/fa/" />
  <link rel="alternate" hreflang="x-default" href="https://raminkhaligh.github.io/blog/" />

  <!-- Performance (consistent) -->
  <link rel="preconnect" href="https://raminkhaligh.github.io" crossorigin>
  <link rel="preload" as="style" href="/assets/style.css" />
  <link rel="preload" as="fetch" href="/blog/posts.json" crossorigin="anonymous" />
  <meta name="theme-color" content="#0b0d10" />
  <link rel="manifest" href="/manifest.json" />
  <meta name="application-name" content="Ramin Khaligh Portfolio" />

  <!-- Favicons (same set as home) -->
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png" />
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="mask-icon" href="/assets/safari-pinned-tab.svg" color="#0b0d10" />

  <!-- Social meta -->
  <meta property="og:title" content="Blog & Case Studies | Ramin Khaligh - ÿ±ÿßŸÖ€åŸÜ ÿÆŸÑ€åŸÇ" />
  <meta property="og:description" content="Explore insights, frameworks, and product case studies by Ramin Khaligh." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://raminkhaligh.github.io/blog/" />
  <meta property="og:image" content="https://raminkhaligh.github.io/assets/blog-cover.png" />
  <meta property="og:site_name" content="Ramin Khaligh Portfolio" />
  <meta property="og:locale" content="en_US" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Blog & Case Studies | Ramin Khaligh - ÿ±ÿßŸÖ€åŸÜ ÿÆŸÑ€åŸÇ" />
  <meta name="twitter:description" content="Insights and case studies on product management, UX, and growth." />
  <meta name="twitter:image" content="https://raminkhaligh.github.io/assets/blog-cover.png" />
  <meta name="twitter:creator" content="@ramin_khaligh" />

  <!-- Early theme apply (no-flash, same as home) -->
  <script>
  (function() {
    try {
      var saved = localStorage.getItem('theme');
      var prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      var theme = (saved === 'light' || saved === 'dark') ? saved : (prefersDark ? 'dark' : 'light');
      document.documentElement.setAttribute('data-theme', theme);
      var meta = document.querySelector('meta[name="theme-color"]');
      if (!meta) { meta = document.createElement('meta'); meta.name = 'theme-color'; document.head.appendChild(meta); }
      meta.setAttribute('content', theme === 'dark' ? '#0b0d10' : '#ffffff');
    } catch(e) {}
  })();
  </script>

  <!-- Styles (shared) -->
  <link rel="stylesheet" href="/assets/style.css" />

  <!-- Structured data (aligned with home: Blog + Breadcrumb + WebPage + Website/Person references) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "WebSite",
        "@id": "https://raminkhaligh.github.io/#website",
        "url": "https://raminkhaligh.github.io/",
        "name": "Ramin Khaligh Portfolio",
        "inLanguage": "en",
        "publisher": {"@id": "https://raminkhaligh.github.io/#organization"}
      },
      {
        "@type": "Person",
        "@id": "https://raminkhaligh.github.io/#ramin",
        "name": "Ramin Khaligh",
        "url": "https://raminkhaligh.github.io/",
        "image": "https://raminkhaligh.github.io/assets/profile.jpg",
        "sameAs": [
          "https://www.linkedin.com/in/ramin-khaligh",
          "https://github.com/raminkhaligh",
          "https://www.instagram.com/ramin.khaligh"
        ]
      },
      {
        "@type": "Organization",
        "@id": "https://raminkhaligh.github.io/#organization",
        "name": "Ramin Khaligh Consulting",
        "url": "https://raminkhaligh.github.io/",
        "logo": "https://raminkhaligh.github.io/assets/logo.png",
        "founder": {"@id": "https://raminkhaligh.github.io/#ramin"}
      },
      {
        "@type": "Blog",
        "@id": "https://raminkhaligh.github.io/blog/#blog",
        "url": "https://raminkhaligh.github.io/blog/",
        "name": "Ramin Khaligh Blog",
        "description": "Product, UX, and growth insights and case studies.",
        "publisher": {"@id": "https://raminkhaligh.github.io/#organization"},
        "inLanguage": "en",
        "author": {"@id": "https://raminkhaligh.github.io/#ramin"}
      },
      {
        "@type": "BreadcrumbList",
        "itemListElement": [
          {"@type": "ListItem", "position": 1, "name": "Home", "item": "https://raminkhaligh.github.io/"},
          {"@type": "ListItem", "position": 2, "name": "Blog", "item": "https://raminkhaligh.github.io/blog/"}
        ]
      },
      {
        "@type": "WebPage",
        "@id": "https://raminkhaligh.github.io/blog/#webpage",
        "url": "https://raminkhaligh.github.io/blog/",
        "name": "Blog & Case Studies",
        "description": "Articles, frameworks, and real-world product/growth learnings by Ramin Khaligh.",
        "isPartOf": {"@id": "https://raminkhaligh.github.io/#website"},
        "inLanguage": "en"
      }
    ]
  }
  </script>

  <!-- Google Tag Manager (same container) -->
  <script>
    (function(w,d,s,l,i){
      w[l]=w[l]||[];
      w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
      var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
      j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
      f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KVRSRD3Q');
  </script>
</head>

<body id="top">
  <!-- GTM noscript -->
  <noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KVRSRD3Q"
    height="0" width="0" style="display:none;visibility:hidden"></iframe>
  </noscript>

  <!-- Skip link (a11y) -->
  <a href="#main" class="skip-link" style="position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden;">Skip to content</a>

  <!-- ===== Navigation (synced with home) ===== -->
  <header class="site-nav" role="navigation" aria-label="Primary">
    <div class="nav-content">
      <a class="brand" href="/" aria-label="Home">
        <img src="/assets/logo.png" alt="Personal logo" width="28" height="28" decoding="async" />
        <span>Ramin Khaligh</span>
      </a>
      <nav role="navigation">
        <a href="/#about">About</a>
        <a href="/#services">Services</a>
        <a href="/#experience">Experience</a>
        <a href="/#testimonials">Testimonials</a>
        <a href="/#skills">Skills</a>
        <a href="/blog/" aria-current="page">Blog</a>
        <a href="/#faq">FAQ</a>
        <a href="/#contact">Contact</a>
        <a class="btn primary" href="/assets/ramin-khaligh-resume.pdf" download aria-label="Download r√©sum√©">R√©sum√©</a>

        <!-- Theme Toggle (identical behavior) -->
        <button class="theme-toggle" type="button" data-theme-toggle aria-pressed="false" title="Toggle color theme">
          <span class="theme-toggle__icon" aria-hidden="true">üåì</span>
          <span class="theme-toggle__label">Auto</span>
        </button>

        <!-- Language switch -->
        <a class="btn" href="/fa/" style="margin-inline-start:.4rem;" aria-label="Persian version">ŸÅÿßÿ±ÿ≥€å</a>
      </nav>
    </div>
  </header>

  <!-- ===== Main ===== -->
  <main id="main" class="container" role="main">
    <!-- Visual breadcrumbs (to mirror JSON-LD) -->
    <nav aria-label="Breadcrumb" style="margin:.6rem 0 0.4rem;">
      <ol style="list-style:none;display:flex;gap:.4rem;padding:0;margin:0;color:var(--muted);font-size:.92rem;">
        <li><a href="/" style="color:var(--muted);text-decoration:none;border-bottom:1px dotted var(--line);">Home</a></li>
        <li aria-hidden="true">/</li>
        <li aria-current="page" style="color:var(--ink);">Blog</li>
      </ol>
    </nav>

    <!-- Header -->
    <section id="blog-header" style="text-align:center; max-width:720px; margin:0.8rem auto;">
      <h1 class="heading-hero" style="margin-bottom:0.25rem;">Articles & Case Studies</h1>
      <p style="color:var(--muted); margin-top:0.25rem;">
        Practical frameworks, field notes, and results from shipping real products and growth programs.
      </p>

      <!-- Controls: search + sort (progressive enhancement) -->
      <div class="card" style="margin-top:0.8rem;">
        <form id="controls" style="display:flex;flex-wrap:wrap;gap:.6rem;align-items:center;justify-content:center;">
          <label for="q" class="visually-hidden">Search</label>
          <input id="q" name="q" type="search" placeholder="Search posts‚Ä¶" autocomplete="off"
                 style="padding:.6rem;border:1px solid var(--line);border-radius:10px;min-width:220px;background:var(--elev-1);color:var(--ink);" />
          <label for="sort" class="visually-hidden">Sort</label>
          <select id="sort" name="sort" style="padding:.6rem;border:1px solid var(--line);border-radius:10px;background:var(--elev-1);color:var(--ink);">
            <option value="new">Newest first</option>
            <option value="old">Oldest first</option>
            <option value="az">Title A ‚Üí Z</option>
            <option value="za">Title Z ‚Üí A</option>
          </select>
          <button type="button" id="clearFilters" class="btn">Clear</button>
        </form>
      </div>
    </section>

    <!-- List -->
    <section id="blog-list" class="container" aria-labelledby="blog-list-title">
      <h2 id="blog-list-title" class="visually-hidden">Post list</h2>
      <div id="blog-grid" class="svc__grid" style="margin-top:1rem;"></div>

      <!-- Pagination -->
      <nav id="pager" aria-label="Pagination" style="display:flex;gap:.5rem;justify-content:center;margin:1rem 0;visibility:hidden;">
        <button class="btn" id="prevPage" disabled>‚Üê Newer</button>
        <span id="pageIndicator" style="align-self:center;color:var(--muted);"></span>
        <button class="btn" id="nextPage" disabled>Older ‚Üí</button>
      </nav>
    </section>

    <div style="text-align:center; margin:0.6rem 0;">
      <a href="/" class="btn">‚Üê Back to Home</a>
    </div>
  </main>

  <!-- ===== Footer (synced) ===== -->
  <footer class="footer" role="contentinfo">
    <div style="display:flex;justify-content:center;align-items:center;gap:1.2rem;flex-wrap:wrap;margin-bottom:.8rem;">
      <a href="mailto:hwraamin@gmail.com" aria-label="Email"
         style="display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:10px;background:rgba(255,255,255,.04);border:1px solid var(--line);box-shadow:var(--shadow-1);">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.8" stroke="var(--accent)" width="18" height="18" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25H4.5a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0L12 13.5 2.25 6.75" />
        </svg>
      </a>
      <a href="https://www.linkedin.com/in/ramin-khaligh" target="_blank" rel="noopener" aria-label="LinkedIn"
         style="display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:10px;background:rgba(255,255,255,.04);border:1px solid var(--line);box-shadow:var(--shadow-1);">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.8" stroke="var(--accent)" width="18" height="18" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M16 8a6 6 0 0 1 6 6v6h-4v-6a2 2 0 0 0-4 0v6h-4v-6a6 6 0 0 1 6-6zM2 9h4v12H2zM4 5a2 2 0 1 1 0 4 2 2 0 0 1 0-4z"/>
        </svg>
      </a>
      <a href="https://www.instagram.com/ramin.khaligh" target="_blank" rel="noopener" aria-label="Instagram"
         style="display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:10px;background:rgba(255,255,255,.04);border:1px solid var(--line);box-shadow:var(--shadow-1);">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" width="18" height="18" aria-hidden="true">
          <rect x="2" y="2" width="20" height="20" rx="5" ry="5"/>
          <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/>
          <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/>
        </svg>
      </a>
    </div>
    <p style="display:flex;justify-content:center;align-items:center;gap:.6rem;">
      ¬© 2025 Ramin Khaligh ¬∑ All Rights Reserved
      <a href="#top" aria-label="Back to top"
         style="display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:8px;background:rgba(255,255,255,.04);border:1px solid var(--line);box-shadow:var(--shadow-1);">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="var(--accent)" width="16" height="16" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M5 15l7-7 7 7" />
        </svg>
      </a>
    </p>
  </footer>

  <!-- Theme runtime (shared) -->
  <script src="/assets/theme.js" defer></script>

  <!-- Blog Loader (filters + pagination + JSON-LD ItemList injection) -->
  <script defer>
  (function() {
    const POSTS_URL = '/blog/posts.json';
    const grid = document.getElementById('blog-grid');
    const q = document.getElementById('q');
    const sortSel = document.getElementById('sort');
    const clearBtn = document.getElementById('clearFilters');

    // pager
    const pager = document.getElementById('pager');
    const prevBtn = document.getElementById('prevPage');
    const nextBtn = document.getElementById('nextPage');
    const pageIndicator = document.getElementById('pageIndicator');

    const PAGE_SIZE = 9;
    let allPosts = [];
    let filtered = [];
    let page = 1;

    function normalize(p) {
      if (!p) return '#';
      if (/^https?:\/\//i.test(p)) return p;
      p = p.replace(/^([.\/]|(\.\.\/)+)/g, '');
      if (!p.startsWith('/')) p = '/' + p;
      return p;
    }

    function renderList(list) {
      grid.innerHTML = '';
      if (!list.length) {
        const msg = document.createElement('p');
        msg.textContent = 'No articles found.';
        msg.style.color = 'var(--muted)';
        msg.style.textAlign = 'center';
        grid.appendChild(msg);
        pager.style.visibility = 'hidden';
        return;
      }

      const start = (page - 1) * PAGE_SIZE;
      const slice = list.slice(start, start + PAGE_SIZE);

      slice.forEach(post => {
        const href = normalize(post.url);
        const img = post.image ? normalize(post.image) : '/assets/blog-cover.png';
        const dateStr = post.date ? new Date(post.date).toLocaleDateString('en-US', {month:'short', day:'numeric', year:'numeric'}) : '';
        const article = document.createElement('article');
        article.className = 'card';
        article.innerHTML = `
          <a href="${href}" style="text-decoration:none;color:inherit;">
            <div style="width:100%;aspect-ratio:16/9;overflow:hidden;border-radius:12px;margin-bottom:1rem;">
              <img src="${img}" alt="${post.title}" loading="lazy" decoding="async" width="1200" height="675"
                   style="width:100%;height:100%;object-fit:cover;transition:transform .25s ease;" />
            </div>
            <h3>${post.title}</h3>
            <p style="color:var(--muted);min-height:3.6em;">${post.summary || ''}</p>
          </a>
          <div style="display:flex;justify-content:space-between;align-items:center;margin-top:0.6rem;">
            <a href="${href}" class="btn">Read More ‚Üí</a>
            <small style="color:var(--muted);">${dateStr}</small>
          </div>`;
        grid.appendChild(article);
      });

      // pager
      const totalPages = Math.ceil(list.length / PAGE_SIZE);
      if (totalPages > 1) {
        pager.style.visibility = 'visible';
        prevBtn.disabled = page <= 1;
        nextBtn.disabled = page >= totalPages;
        pageIndicator.textContent = `Page ${page} of ${totalPages}`;
      } else {
        pager.style.visibility = 'hidden';
      }
    }

    function applyFilters() {
      const term = (q.value || '').trim().toLowerCase();
      const s = sortSel.value;
      filtered = allPosts.filter(p => {
        if (!term) return true;
        const hay = [
          p.title || '',
          p.summary || '',
          (p.tags || []).join(' '),
          (p.category || '')
        ].join(' ').toLowerCase();
        return hay.includes(term);
      });

      // sorting
      filtered.sort((a,b) => {
        if (s === 'new') return new Date(b.date) - new Date(a.date);
        if (s === 'old') return new Date(a.date) - new Date(b.date);
        if (s === 'az') return String(a.title).localeCompare(String(b.title));
        if (s === 'za') return String(b.title).localeCompare(String(a.title));
        return 0;
      });

      page = 1;
      renderList(filtered);
      injectItemListJSONLD(filtered); // keep SEO in sync with current sort/filter (first page)
    }

    // Inject ItemList JSON-LD for the current first page (SEO)
    function injectItemListJSONLD(list) {
      try {
        const old = document.getElementById('itemlist-jsonld');
        if (old) old.remove();
        const start = 0;
        const slice = list.slice(start, start + PAGE_SIZE);
        if (!slice.length) return;
        const data = {
          "@context": "https://schema.org",
          "@type": "ItemList",
          "itemListElement": slice.map((p, idx) => ({
            "@type": "ListItem",
            "position": idx + 1,
            "url": normalize(p.url),
            "name": p.title || undefined
          }))
        };
        const script = document.createElement('script');
        script.type = 'application/ld+json';
        script.id = 'itemlist-jsonld';
        script.textContent = JSON.stringify(data);
        document.head.appendChild(script);
      } catch(e) {}
    }

    // events
    q && q.addEventListener('input', () => applyFilters());
    sortSel && sortSel.addEventListener('change', () => applyFilters());
    clearBtn && clearBtn.addEventListener('click', () => {
      q.value = '';
      sortSel.value = 'new';
      applyFilters();
    });

    prevBtn.addEventListener('click', () => {
      if (page > 1) { page--; renderList(filtered); }
    });
    nextBtn.addEventListener('click', () => {
      const totalPages = Math.ceil(filtered.length / PAGE_SIZE);
      if (page < totalPages) { page++; renderList(filtered); }
    });

    // fetch posts
    fetch(POSTS_URL)
      .then(res => res.json())
      .then(posts => {
        if (!Array.isArray(posts)) throw new Error('Invalid posts.json');
        posts.sort((a,b) => new Date(b.date) - new Date(a.date)); // default newest first
        allPosts = posts;
        filtered = posts.slice();
        renderList(filtered);
        injectItemListJSONLD(filtered);
      })
      .catch(() => {
        const msg=document.createElement('p');
        msg.textContent='Unable to load posts right now. Please try again later.';
        msg.style.color='var(--muted)';
        msg.style.textAlign='center';
        grid.appendChild(msg);
      });
  })();
  </script>

  <!-- Service Worker (same as home) -->
  <script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/sw.js').catch(err => console.warn('SW registration failed:', err));
    });
  }
  </script>
</body>
</html>
